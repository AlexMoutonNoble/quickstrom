<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Double Toggle</title>
  </head>
  <body>
    <button name="off">Off</button>
    <button name="on" disabled>On</button>
  </body>
  <script>
    var off = document.querySelector("button[name=off]");
    var on = document.querySelector("button[name=on]");
    off.addEventListener("click", () => {
      on.disabled = false;
      //off.disabled = true;
    });
    on.addEventListener("click", () => {
      off.disabled = false;
      on.disabled = true;
    });
  </script>
  <script src="/nix/store/b8pz2gs63m9crz9fgi6vls0bh0yqwbx6-webcheck-client-side/webcheck-client-side.js"></script>
  <script>
    async function test() {
      const q1 = ["[name=off]", [{ tag: "property", name: "disabled" }]];
      const q2 = ["[name=on]", [{ tag: "property", name: "disabled" }]];
      const qs = [q1, q2];
      const s1 = webcheck.observeInitialStates(qs);
      console.log(JSON.stringify(s1));

      while (true) {
        const o = webcheck.registerNextStateObserver(qs);
        const sn = await webcheck.getNextState(o);
      console.log(JSON.stringify(sn));
      }
    }

    // test();
  </script>
</html>
