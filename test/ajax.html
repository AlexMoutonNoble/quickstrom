<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <title>AJAX Test</title>
    <script src="../target/wtp-ts.js"></script>
  </head>
  <body>
    <button>Launch the missiles</button>
    <p class="message"></p>
  </body>
  <script>
    var button = document.querySelector("button");
    var message = document.querySelector(".message");
    button.addEventListener("click", function () {
        setTimeout(function () {
            button.disabled = true;
        }, 100);
        if (message.innerText === "") {
          message.innerText = "Missiles launched.";
        }
        setTimeout(function () {
            message.innerText = "Boom!";
        }, Math.random() * 500 + 750); // 1s +/- 250ms
    });
  </script>
  <script>
    wtp.check({
      queries: [
        wtp.enabled(wtp.byCss("button[name=launch]")),
        wtp.text(wtp.byCss(".message")),
      ],
      actions: [wtp.click("button")],
      maxActions: 10,
      actionTimeout: 500,
    });
  </script>
</html>
